<!-- src/app/core/layout/sidebar/sidebar.component.html -->
<div
  [class.w-20]="isCollapsed"
  [class.w-72]="!isCollapsed"
  class="flex flex-col h-full bg-white border-r border-slate-200 transition-all duration-300 overflow-hidden"
>
  <div class="flex items-center justify-between px-4 py-5">
    <div class="flex items-center gap-3">
      <div class="h-11 w-11 rounded-xl bg-[var(--brand-primary)] grid place-content-center text-white text-lg font-semibold">
        S
      </div>
      <div *ngIf="!isCollapsed" class="leading-5">
        <p class="text-xs uppercase tracking-[0.12em] text-slate-500">Apolo Suite</p>
        <p class="text-lg font-semibold text-slate-900">Signly</p>
      </div>
    </div>
    <button
      (click)="toggle()"
      class="rounded-lg border border-slate-200 bg-white p-2 transition hover:border-[var(--brand-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--brand-primary)]/30"
      aria-label="Contraer o expandir menú"
    >
      <img
        src="assets/icons/sidebar/HamburgerMenu.svg"
        alt="Toggle sidebar"
        class="h-5 w-5"
      />
    </button>
  </div>

  <nav class="flex-1 overflow-y-auto px-3 pb-4 space-y-6">
    <div class="space-y-1">
      <p *ngIf="!isCollapsed" class="px-3 text-[11px] uppercase tracking-[0.14em] text-slate-400">
        Navegación
      </p>
      <a
        *ngFor="let item of mainNav"
        [routerLink]="item.path"
        routerLinkActive="active"
        #rla="routerLinkActive"
        class="group relative flex items-center gap-3 rounded-lg px-3 py-3 text-sm font-medium transition"
        [ngClass]="
          rla.isActive
            ? 'bg-slate-100 text-[var(--brand-primary)]'
            : 'text-slate-700 hover:bg-slate-50'
        "
      >
        <span
          class="absolute left-0 top-2.5 bottom-2.5 w-1 rounded-full"
          [ngClass]="rla.isActive ? 'bg-[var(--brand-primary)]' : 'bg-transparent'"
        ></span>
        <span
          class="flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-slate-200 bg-white text-slate-600"
        >
          <img [src]="item.icon" [alt]="item.label" class="h-5 w-5" />
        </span>
        <span *ngIf="!isCollapsed" class="truncate">{{ item.label }}</span>
      </a>
    </div>

    <div class="space-y-1">
      <p *ngIf="!isCollapsed" class="px-3 text-[11px] uppercase tracking-[0.14em] text-slate-400">
        Preferencias
      </p>
      <a
        *ngFor="let item of secondaryNav"
        [routerLink]="item.path"
        routerLinkActive="active"
        #rla="routerLinkActive"
        class="group relative flex items-center gap-3 rounded-lg px-3 py-3 text-sm font-medium transition"
        [ngClass]="
          rla.isActive
            ? 'bg-slate-100 text-[var(--brand-primary)]'
            : 'text-slate-700 hover:bg-slate-50'
        "
      >
        <span
          class="absolute left-0 top-2.5 bottom-2.5 w-1 rounded-full"
          [ngClass]="rla.isActive ? 'bg-[var(--brand-primary)]' : 'bg-transparent'"
        ></span>
        <span
          class="flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-slate-200 bg-white text-slate-600"
        >
          <img [src]="item.icon" [alt]="item.label" class="h-5 w-5" />
        </span>
        <span *ngIf="!isCollapsed" class="truncate">{{ item.label }}</span>
      </a>
    </div>
  </nav>

  <div class="border-t border-slate-200 px-3 py-4 bg-white">
    <button
      type="button"
      (click)="logout()"
      [disabled]="isLoggingOut"
      class="w-full flex items-center gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 text-sm font-semibold text-slate-700 transition hover:border-rose-200 hover:bg-rose-50 hover:text-rose-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-rose-200/40"
    >
      <span
        class="flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-slate-200 bg-white text-rose-600"
      >
        <img src="assets/icons/sidebar/LogOut.svg" alt="Logout" class="h-5 w-5" />
      </span>
      <span *ngIf="!isCollapsed" class="truncate">
        <span *ngIf="!isLoggingOut">Cerrar sesión</span>
        <span *ngIf="isLoggingOut">Cerrando sesión…</span>
      </span>
    </button>
  </div>
</div>
